"use strict";(self.webpackChunkdungeon_tools=self.webpackChunkdungeon_tools||[]).push([[625],{2625:(xe,E,s)=>{s.r(E),s.d(E,{NotesModule:()=>Ce});var d=s(6895),l=s(4006),u=s(4269),M=s(8314),O=s(5190),w=s(5092),G=s(6051),H=s(7395),m=s(5412),e=s(4650);let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,m.Is,l.UX]}),n})();var f=s(727),p=s(3900),P=s(9841),D=s(4482);const{isArray:F}=Array;function J(n){return 1===n.length&&F(n[0])?n[0]:n}var L=s(3268),Y=s(9635),U=s(3269);function b(...n){const r=(0,U.jO)(n);return r?(0,Y.z)(b(...n),(0,L.Z)(r)):(0,D.e)((t,i)=>{(0,P.l)([t,...J(n)])(i)})}function _(...n){return b(...n)}var C=s(9646),x=s(1848),I=s(6209),T=s(9639),y=s(6094),S=s(7392),j=s(472),Q=s(1135),N=s(7579),R=s(9300),B=s(5549),V=s(8810);let K=(()=>{class n{constructor(t,i,o,c){this.router=t,this.linker=i,this.notes=o,this.settings=c,this.noteId=new Q.X(null),this.selectedInvalidLink=new N.x,this.subscriptions=new f.w0}ngOnChanges(t){t.id&&this.noteId.next(t.id.currentValue)}ngOnInit(){this.subscriptions.add(this.noteId.pipe((0,R.h)(t=>!!t),(0,p.w)(t=>this.notes.getCurrentNoteValue(t))).subscribe(t=>{this.noteValue=t})),this.subscriptions.add(this.selectedInvalidLink.subscribe(t=>{const i=this.notes.addNoteEntry([],t);this.settings.setSetting("notesSelectedId",i),this.router.navigate(["notes",i])}))}ngOnDestroy(){this.subscriptions.unsubscribe()}onNoteChanged(t){const i=this.noteId.value;i&&this.notes.updateNoteValue(i,t)}onSelectedInvalidLink(t){this.selectedInvalidLink.next(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0),e.Y36(B.I),e.Y36(y.U),e.Y36(T.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lxs-note-editor"]],inputs:{id:"id"},features:[e.TTD],decls:1,vars:2,consts:[["linkPreferredSource","notes",3,"value","linkEvaluator","valueChanged","selectedInvalidLink"]],template:function(t,i){1&t&&(e.TgZ(0,"lxs-inscription-editor",0),e.NdJ("valueChanged",function(c){return i.onNoteChanged(c)})("selectedInvalidLink",function(c){return i.onSelectedInvalidLink(c)}),e.qZA()),2&t&&e.Q6J("value",i.noteValue)("linkEvaluator",i.linker)},dependencies:[V.p],styles:["[_nghost-%COMP%]{display:block}"]}),n})(),q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["lxs-notes-help"]],decls:10,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Notes Tool"),e.qZA(),e.TgZ(2,"p"),e._uU(3," Use the Notes Tool to write wiki-style notes for anything!\n"),e.qZA(),e.TgZ(4,"p"),e._uU(5," Click the plus button on the left bar to add a new note, and select notes in the list below to swap between a currently viewed note. On a note editor, select the editing button above the note to rename the note, and select the editing button on the note card to toggle between editing and viewing the note.\n"),e.qZA(),e.TgZ(6,"p"),e._uU(7,' Notes support adding links to other notes. To link to another note, surround a note\'s name in square brackets []s. The link will match the first note with the same letters and numbers, regardless of letter case, spaces, or any other symbols in the name. For example, [a-note] would link to a note named "A Note", "Ano Te", "anotE+++", or any similar name. If a note does not exist that matches the link, clicking on the link will automatically create a new note with that name.\n'),e.qZA(),e.TgZ(8,"p"),e._uU(9," Open this page again by the question mark button on the left bar.\n"),e.qZA())}}),n})(),z=(()=>{class n{constructor(t,i){this.dialog=t,this.data=i,this.renamingControl=new l.NI(""),this.renamingControl.setValue(this.data.currentValue)}onClickCancel(){this.dialog.close(void 0)}onClickSubmit(){this.dialog.close(this.renamingControl.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.so),e.Y36(m.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lxs-text-field-dialog"]],decls:9,vars:2,consts:[[1,"title"],["type","text",3,"formControl"],[1,"buttons"],[1,"button",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"label")(1,"h3",0),e._uU(2),e.qZA(),e._UZ(3,"input",1),e.qZA(),e.TgZ(4,"div",2)(5,"div",3),e.NdJ("click",function(){return i.onClickCancel()}),e._uU(6," Cancel "),e.qZA(),e.TgZ(7,"div",3),e.NdJ("click",function(){return i.onClickSubmit()}),e._uU(8," Submit "),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(i.data.message),e.xp6(1),e.Q6J("formControl",i.renamingControl))},dependencies:[l.Fj,l.JJ,l.oH],styles:["[_nghost-%COMP%]{display:block;width:14rem}.title[_ngcontent-%COMP%]{text-align:center}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.button[_ngcontent-%COMP%]{padding:1rem;-webkit-user-select:none;user-select:none;color:#333}.button[_ngcontent-%COMP%]:hover{cursor:pointer;color:#555}"]}),n})(),X=(()=>{class n{constructor(t){this.dialog=t}open(t){return this.dialog.open(z,{data:t}).afterClosed()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=s(1704),h=s(1206),W=s(4454),$=s(93),v=s(3839);function ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"lxs-action",8),e.NdJ("action",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.helpEvent.emit())}),e.qZA()}}function te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"lxs-action",9),e.NdJ("action",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onBack())}),e.qZA()}}function ne(n,r){if(1&n&&e._uU(0),2&n){const t=e.oxw();e.hij(" ",t.currentGroup?t.currentGroup.name:t.label," ")}}function ie(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"lxs-action",10),e.NdJ("action",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteGroupEvent.emit(o.currentGroup))}),e.qZA()}}function oe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"lxs-action",11),e.NdJ("action",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.renameGroupEvent.emit(o.currentGroup))}),e.qZA()}}function re(n,r){1&n&&(e.TgZ(0,"div",24),e._UZ(1,"mat-icon",25),e.qZA())}function se(n,r){if(1&n&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.children.length?t.children.length+" Item"+(1===t.children.length?"":"s"):"Empty"," ")}}function ce(n,r){if(1&n&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function le(n,r){1&n&&e._UZ(0,"div",28)}const ae=function(n){return{"side-item-active":n}};function de(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const c=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.onSelect(c))}),e.TgZ(1,"div",16)(2,"div",17),e._UZ(3,"mat-icon",18),e.qZA(),e.TgZ(4,"div",19),e._uU(5),e.qZA(),e.YNc(6,re,2,0,"div",20),e.YNc(7,se,2,1,"div",21),e.qZA(),e.YNc(8,ce,2,1,"div",22),e.YNc(9,le,1,0,"div",23),e.qZA()}if(2&n){const t=r.$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(4,ae,t.id===i.currentSelectionId)),e.xp6(5),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",!t.isGroup),e.xp6(1),e.Q6J("ngIf",t.isGroup)}}function ue(n,r){if(1&n&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" No ",t.label," ")}}function pe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("cdkDropListDropped",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.onDrag(o))}),e.YNc(1,de,10,6,"div",13),e.YNc(2,ue,2,1,"div",14),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.currentTree)("ngForTrackBy",t.trackById),e.xp6(1),e.Q6J("ngIf",0===t.currentTree.length)}}let he=(()=>{class n{constructor(){this.addEvent=new e.vpe,this.helpEvent=new e.vpe,this.selectEvent=new e.vpe,this.moveEvent=new e.vpe,this.renameGroupEvent=new e.vpe,this.deleteGroupEvent=new e.vpe,this.currentHierarchy=[]}ngOnChanges(t){t.tree&&this.rebuildTree(),t.selectedEntryId&&this.redirectSelection()}onBack(){this.tree?(this.currentHierarchy=this.currentHierarchy.slice(0,-1),this.currentGroup=(0,g.YW)(this.tree,this.currentHierarchy),this.currentTree=this.currentGroup?this.currentGroup.children:this.tree,this.reassignSeletion()):this.revertProperties()}onSelect(t){t.isGroup?(this.currentHierarchy=[...this.currentHierarchy,t.id],this.currentGroup=t,this.currentTree=t.children,this.reassignSeletion()):this.selectEvent.emit(t.id)}onDrag(t){t.previousIndex!==t.currentIndex&&this.moveEvent.emit({hierarchy:this.currentHierarchy,from:t.previousIndex,to:t.currentIndex})}revertProperties(){this.currentTree=void 0,this.currentGroup=void 0,this.currentHierarchy=[]}rebuildTree(){if(!this.tree)return void this.revertProperties();let i,t=this.tree;const o=[];for(const c of this.currentHierarchy){const a=t.find(k=>k.id===c&&k.isGroup);if(!a||!a.isGroup)break;i=a,t=a.children,o.push(c)}this.currentTree=t,this.currentGroup=i,this.currentHierarchy=o,this.reassignSeletion()}reassignSeletion(){if(!this.tree||!this.selectedEntryId)return void(this.currentSelectionId=void 0);const t=(0,g.Hm)(this.tree,i=>i.id===this.selectedEntryId);if(t)for(const[i,o]of t.entries()){if(!(i<this.currentHierarchy.length))return void(this.currentSelectionId=o);if(this.currentHierarchy[i]!==o)return void(this.currentSelectionId=void 0)}else this.currentSelectionId=void 0}redirectSelection(){if(!this.tree||!this.selectedEntryId)return;const t=(0,g.Hm)(this.tree,i=>i.id===this.selectedEntryId);!t||(this.currentHierarchy=t.slice(0,-1),this.currentGroup=(0,g.YW)(this.tree,this.currentHierarchy),this.currentTree=this.currentGroup?.children||this.tree,this.reassignSeletion())}trackById(t,i){return i.id}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["lxs-side-tree"]],inputs:{label:"label",tree:"tree",selectedEntryId:"selectedEntryId",showHelp:"showHelp"},outputs:{addEvent:"addEvent",helpEvent:"helpEvent",selectEvent:"selectEvent",moveEvent:"moveEvent",renameGroupEvent:"renameGroupEvent",deleteGroupEvent:"deleteGroupEvent"},features:[e.TTD],decls:9,vars:5,consts:[["lxsSideHeaderLeft","","icon","question","label","Help",3,"action",4,"ngIf"],["lxsSideHeaderLeft","","icon","back","label","Back",3,"action",4,"ngIf"],["lxsSideHeaderLabel",""],["lxsSideHeaderRight","","icon","add","label","Add",3,"action"],["lxsSideHeaderToolbar","","icon","delete","label","Delete Group",3,"action",4,"ngIf"],["lxsSideHeaderToolbar","","icon","quill","label","Rename Group",3,"action",4,"ngIf"],["lxsSideHeaderToolbar","","icon","add","label","Add Group",3,"action"],["class","side-tree","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["lxsSideHeaderLeft","","icon","question","label","Help",3,"action"],["lxsSideHeaderLeft","","icon","back","label","Back",3,"action"],["lxsSideHeaderToolbar","","icon","delete","label","Delete Group",3,"action"],["lxsSideHeaderToolbar","","icon","quill","label","Rename Group",3,"action"],["cdkDropList","",1,"side-tree",3,"cdkDropListDropped"],["class","side-item","cdkDrag","","cdkDragLockAxis","y",3,"ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","side-no-content",4,"ngIf"],["cdkDrag","","cdkDragLockAxis","y",1,"side-item",3,"ngClass","click"],[1,"side-item-content"],["cdkDragHandle","",1,"side-item-mover-button"],["svgIcon","handle"],[1,"side-item-label"],["class","side-entry-selector",4,"ngIf"],["class","side-group-count",4,"ngIf"],["class","side-item-drag-preview",4,"cdkDragPreview"],["class","side-item-drag-placeholder",4,"cdkDragPlaceholder"],[1,"side-entry-selector"],["svgIcon","forward"],[1,"side-group-count"],[1,"side-item-drag-preview"],[1,"side-item-drag-placeholder"],[1,"side-no-content"]],template:function(t,i){1&t&&(e.TgZ(0,"lxs-side-header"),e.YNc(1,ee,1,0,"lxs-action",0),e.YNc(2,te,1,0,"lxs-action",1),e.YNc(3,ne,1,1,"ng-template",2),e.TgZ(4,"lxs-action",3),e.NdJ("action",function(){return i.addEvent.emit({type:"entry",hierarchy:i.currentHierarchy})}),e.qZA(),e.YNc(5,ie,1,0,"lxs-action",4),e.YNc(6,oe,1,0,"lxs-action",5),e.TgZ(7,"lxs-action",6),e.NdJ("action",function(){return i.addEvent.emit({type:"group",hierarchy:i.currentHierarchy})}),e.qZA()(),e.YNc(8,pe,3,3,"div",7)),2&t&&(e.xp6(1),e.Q6J("ngIf",0===i.currentHierarchy.length&&i.showHelp),e.xp6(1),e.Q6J("ngIf",i.currentHierarchy.length>0),e.xp6(3),e.Q6J("ngIf",i.currentGroup),e.xp6(1),e.Q6J("ngIf",i.currentGroup),e.xp6(2),e.Q6J("ngIf",i.currentTree))},dependencies:[d.mk,d.sg,d.O5,h.Wj,h.Zt,h.Bh,h.pV,h.Hk,S.Hw,W.N,$.z,v.iz,v.hA,v.wi,v.g2],styles:[".side-item[_ngcontent-%COMP%]{padding:0 .5rem;height:3rem;color:#333}.side-item[_ngcontent-%COMP%]:hover{background-color:#ddd;cursor:pointer}.side-item-active[_ngcontent-%COMP%], .side-item-active[_ngcontent-%COMP%]:hover{background-color:#444;color:#f2f2f2}.side-item-active[_ngcontent-%COMP%]   .side-item-mover-button[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#f2f2f2}.side-item-active[_ngcontent-%COMP%]   .side-item-mover-button[_ngcontent-%COMP%]:hover > mat-icon[_ngcontent-%COMP%]{color:#aaa}.side-item-active[_ngcontent-%COMP%]   .side-entry-selector[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{color:#f2f2f2}.side-item-content[_ngcontent-%COMP%]{display:flex;flex-flow:row;justify-content:center;align-items:center;border-bottom:.0625rem solid #777;height:calc(100% - .0625rem)}.side-item-mover-button[_ngcontent-%COMP%]{margin-right:.5rem;display:flex;justify-content:center;align-items:center;width:2rem;height:2rem;line-height:2rem;-webkit-user-select:none;user-select:none}.side-item-mover-button[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{width:1rem;height:1rem;line-height:1rem;color:#333}.side-item-mover-button[_ngcontent-%COMP%]:hover{cursor:pointer}.side-item-mover-button[_ngcontent-%COMP%]:hover > mat-icon[_ngcontent-%COMP%]{color:#555}.side-item-label[_ngcontent-%COMP%]{flex:1}.side-item-drag-preview[_ngcontent-%COMP%]{margin:1rem;padding:1rem;background-color:#f7f7f7;color:#333;box-shadow:0 0 .5rem #44444460;width:12rem}.side-item-drag-placeholder[_ngcontent-%COMP%]{height:3rem;background-color:#44444460}.side-entry-selector[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.side-entry-selector[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{width:1rem;height:1rem;line-height:1rem;color:#333}.side-group-count[_ngcontent-%COMP%]{font-size:11px}.side-no-content[_ngcontent-%COMP%]{height:3rem;line-height:3rem;text-align:center;color:#333}"]}),n})(),me=(()=>{class n{constructor(t,i,o,c,a){this.router=t,this.confirmDialog=i,this.textFieldDialog=o,this.settings=c,this.notes=a,this.subscriptions=new f.w0,this.renameGroupSubject=new N.x,this.deleteGroupSubject=new N.x}ngOnInit(){this.subscriptions.add(this.notes.noteStore.subscribe(t=>{this.noteStore=t})),this.subscriptions.add(this.renameGroupSubject.pipe((0,p.w)(t=>(0,C.of)(t.id).pipe(_(this.textFieldDialog.open({message:"Rename Group:",currentValue:t.name}))))).subscribe(([t,i])=>{void 0!==i&&this.notes.editNoteGroup(t,o=>({...o,name:i}))})),this.subscriptions.add(this.deleteGroupSubject.pipe((0,p.w)(t=>(0,C.of)(t.id).pipe(_(this.confirmDialog.open({message:"Are you sure you want to delete this group? All entries will be added to the end of the parent."}))))).subscribe(([t,i])=>{i&&this.notes.deleteNoteGroup(t)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}onClickAddNoteEntry(t){if("entry"===t.type){const i=this.notes.addNoteEntry(t.hierarchy);this.settings.setSetting("notesSelectedId",i),this.router.navigate(["notes",i])}else this.notes.addNoteGroup(t.hierarchy)}onClickAboutNotes(){this.settings.setSetting("notesSelectedId",null),this.router.navigate(["notes"])}onClickNoteEntry(t){t!==this.activeNoteEntryId&&(this.settings.setSetting("notesSelectedId",t),this.router.navigate(["notes",t]))}onClickMoveNoteEntry(t){this.notes.moveNoteEntry(t.hierarchy,t.from,t.to)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0),e.Y36(I.D),e.Y36(X),e.Y36(T.g),e.Y36(y.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lxs-notes-list"]],inputs:{activeNoteEntryId:"activeNoteEntryId"},decls:1,vars:3,consts:[["side","","label","Notes",3,"tree","selectedEntryId","showHelp","addEvent","selectEvent","moveEvent","helpEvent","renameGroupEvent","deleteGroupEvent"]],template:function(t,i){1&t&&(e.TgZ(0,"lxs-side-tree",0),e.NdJ("addEvent",function(c){return i.onClickAddNoteEntry(c)})("selectEvent",function(c){return i.onClickNoteEntry(c)})("moveEvent",function(c){return i.onClickMoveNoteEntry(c)})("helpEvent",function(){return i.onClickAboutNotes()})("renameGroupEvent",function(c){return i.renameGroupSubject.next(c)})("deleteGroupEvent",function(c){return i.deleteGroupSubject.next(c)}),e.qZA()),2&t&&e.Q6J("tree",i.noteStore)("selectedEntryId",i.activeNoteEntryId)("showHelp",!0)},dependencies:[he]}),n})();function ge(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"label"),e._uU(2," Rename: "),e._UZ(3,"input",7),e.qZA(),e.TgZ(4,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onClickRenameCancel())}),e._UZ(5,"mat-icon",9),e.qZA(),e.TgZ(6,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onClickRenameSave())}),e._UZ(7,"mat-icon",10),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("formControl",t.renamingControl)}}function ve(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onClickRename())}),e._UZ(3,"mat-icon",11),e.qZA(),e.TgZ(4,"div",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onClickDelete())}),e._UZ(5,"mat-icon",12),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.activeNoteEntryName)}}function fe(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"div",3),e.YNc(2,ge,8,1,"ng-container",1),e.YNc(3,ve,6,1,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"lxs-note-editor",6),e.qZA(),e.BQk()),2&n){const t=e.MAs(4),i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.isRenaming)("ngIfElse",t),e.xp6(4),e.Q6J("id",i.activeNoteEntryId)}}function _e(n,r){1&n&&e._UZ(0,"lxs-notes-help")}let Z=(()=>{class n{constructor(t,i,o,c,a){this.route=t,this.router=i,this.dialog=o,this.settings=c,this.notes=a,this.subscriptions=new f.w0,this.isRenaming=!1,this.renamingControl=new l.p4(""),this.isDeleting=!1}ngOnInit(){this.subscriptions.add(this.route.paramMap.pipe((0,p.w)(t=>{const i=t.get("id");return this.activeNoteEntryId=i??void 0,i&&"help"!==i?this.notes.getNoteEntry(i).pipe(_((0,C.of)(i))):"help"===i?(this.settings.setSetting("notesSelectedId",null),this.router.navigate(["notes"]),x.C):this.redirectToRecent()})).subscribe(([t,i])=>{t?(this.activeNoteEntryName=t.name,this.isRenaming||this.renamingControl.setValue(t.name)):this.isDeleting?(this.isDeleting=!1,this.router.navigate(["notes"])):this.router.navigate(["notes-not-found",i])}))}ngOnDestroy(){this.subscriptions.unsubscribe()}redirectToRecent(){const t=this.settings.getCurrentSetting("notesSelectedId");return t?this.notes.getNoteEntry(t).pipe((0,p.w)(i=>(i&&this.router.navigate(["notes",t]),x.C))):x.C}onClickRename(){this.isRenaming=!0}onClickRenameCancel(){this.isRenaming=!1,this.renamingControl.setValue(this.activeNoteEntryName)}onClickRenameSave(){this.isRenaming=!1,this.notes.editNoteEntry(this.activeNoteEntryId||"",t=>(t.name=this.renamingControl.value,t))}onClickDelete(){this.subscriptions.add(this.dialog.open({message:"Are you sure you want to delete this note?"}).subscribe(t=>{t&&(this.isDeleting=!0,this.settings.setSetting("notesSelectedId",null),this.notes.deleteNoteEntry(this.activeNoteEntryId||""))}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz),e.Y36(u.F0),e.Y36(I.D),e.Y36(T.g),e.Y36(y.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lxs-notes"]],decls:5,vars:3,consts:[["side","",3,"activeNoteEntryId"],[4,"ngIf","ngIfElse"],["noNotes",""],[1,"header"],["notRenaming",""],[1,"note-body"],[3,"id"],["type","text",3,"formControl"],[1,"header-button",3,"click"],["svgIcon","close"],["svgIcon","check"],["svgIcon","quill"],["svgIcon","delete"]],template:function(t,i){if(1&t&&(e.TgZ(0,"lxs-split-panels"),e._UZ(1,"lxs-notes-list",0),e.YNc(2,fe,7,3,"ng-container",1),e.YNc(3,_e,1,0,"ng-template",null,2,e.W1O),e.qZA()),2&t){const o=e.MAs(4);e.xp6(1),e.Q6J("activeNoteEntryId",i.activeNoteEntryId),e.xp6(1),e.Q6J("ngIf",i.activeNoteEntryId)("ngIfElse",o)}},dependencies:[d.O5,S.Hw,l.Fj,l.JJ,l.oH,j.f,K,q,me],styles:[".header[_ngcontent-%COMP%]{display:flex;flex-flow:row;justify-content:center;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{flex:1;margin:0}.header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1}.header-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:3rem;height:3rem;line-height:3rem;-webkit-user-select:none;user-select:none}.header-button[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;line-height:1.5rem;color:#333}.header-button[_ngcontent-%COMP%]:hover{cursor:pointer}.header-button[_ngcontent-%COMP%]:hover > mat-icon[_ngcontent-%COMP%]{color:#555}.header-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.note-body[_ngcontent-%COMP%]{margin:1rem;padding:1rem;background-color:#f7f7f7;color:#333;box-shadow:0 0 .5rem #44444460;margin:1rem 0 0}"]}),n})(),Ce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,O.D,M.p,w.y,l.UX,u.Bz.forChild([{path:"",component:Z},{path:":id",component:Z}]),G.Q,H.n,A]}),n})()}}]);